# ๐ ุดุฑุญ ุชุนุทูู Stories Archive
**ุงูุชุงุฑูุฎ:** 8 ุฏูุณูุจุฑ 2025

---

## โ ููุงุฐุง ุชู ุชุนุทูู Storiesุ

### ุงููุดููุฉ:
1. **Apify deprecated `resultsType: 'stories'`**
   - ุนูุฏูุง ุชุทูุจ "stories"ุ ููุฑุฌุน Apify **Reels ูุฏููุฉ** ุจุฏูุงู ูู Stories ุญููููุฉ
   - ุงูู "stories" ุงููุฌููุจุฉ ูุงูุช ูู **ุฃุดูุฑ ูุงุถูุฉ** (ุฃุบุณุทุณ - ุฏูุณูุจุฑ 2025)

2. **Instagram Stories ุชูุชูู ุจุนุฏ 24 ุณุงุนุฉ**
   - Stories ุงูุญููููุฉ ุชูุญุฐู ุชููุงุฆูุงู ุจุนุฏ 24 ุณุงุนุฉ
   - ูุง ูููู ุฌูุจ stories ููุชููุฉ ุงูุตูุงุญูุฉ

3. **ุงูุจูุงูุงุช ุงููุฌููุจุฉ ูุงูุช ุฎุงุทุฆุฉ**
   - ุงูู 17 "stories" ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุช ูู ุงููุงูุน **Reels ูุฏููุฉ**
   - ููุณุช Instagram Stories ุญููููุฉ

---

## โ ูุง ุชู ุนููู:

### 1. ุญุฐู Stories ุงููุฏููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```python
# ุชู ุญุฐู ุฌููุน ุงูุณุฌูุงุช ูู ุฌุฏูู stories
DELETE FROM stories WHERE id != 0;
```

**ุงููุชูุฌุฉ:** ุฌุฏูู `stories` ุงูุขู ูุงุฑุบ ุชูุงูุงู.

---

### 2. ุชุนุทูู ุฌูุจ Stories ูู scraper.py:

**ูุจู:**
```python
async def fetch_instagram_stories(self, username: str):
    # ูุฌูุจ ูู Apify ุจุงุณุชุฎุฏุงู resultsType: 'stories'
    # ุงููุดููุฉ: ููุฑุฌุน Reels ูุฏููุฉ ูููุณุช stories ุญููููุฉ
```

**ุจุนุฏ:**
```python
async def fetch_instagram_stories(self, username: str):
    """
    NOTE: Apify deprecated 'resultsType: stories' - it returns old Reels instead.
    Real Instagram Stories expire after 24 hours and cannot be reliably fetched.
    This function is kept for API compatibility but returns empty results.
    """
    logger.info(f"๐ Stories fetch skipped for @{username} (Apify deprecated)")
    return {"status": "success", "message": "Stories disabled", "stories": []}
```

**ุงูููู:** [scraper.py:231-250](scraper.py#L231-L250)

---

## ๐จ ูุง ูุญุฏุซ ุงูุขู ูู ุงููุงุฌูุฉ:

### Stories Archive ูู client.html:

ุนูุฏ ูุชุญ ุตูุญุฉ ุงูุชุญูููุงุช (ุฒุฑ ๐)ุ ุณุชุฌุฏ:

1. **Posts Archive (ูุณุชุทูู 1):**
   - โ ูุนุฑุถ Posts ุงูุญููููุฉ ูู ุฌุฏูู `posts`
   - โ ูุฌููุนุฉ ุญุณุจ ุงูุชุงุฑูุฎ
   - โ ูุนูู ุจุดูู ุตุญูุญ 100%

2. **Stories Archive (ูุณุชุทูู 2):**
   - โ๏ธ ูุนุฑุถ ุฑุณุงูุฉ: **"No stories yet"**
   - ุงูุณุจุจ: ุฌุฏูู `stories` ูุงุฑุบ (ุชู ุญุฐู Reels ุงููุฏููุฉ)
   - ุงููุธููุฉ ูุนุทูุฉ ุญุงููุงู ุจุณุจุจ ูููุฏ Apify

---

## ๐ ูุงุฐุง ูุนูู ูุฐุง ูููุณุชุฎุฏูุ

### โ ูุง ูุนูู:
- โ **Posts Archive** - ูุนุฑุถ ุฌููุน ุงูููุดูุฑุงุช ุจุดูู ุตุญูุญ
- โ **Analytics** - ุฌููุน ุงูุฅุญุตุงุฆูุงุช ุฏูููุฉ (Engagement, Likes, Comments)
- โ **Heatmap** - ูุนุฑุถ ูุดุงุท Posts ุจุดูู ุตุญูุญ

### โ ูุง ูุง ูุนูู:
- โ **Stories Archive** - ูุนุทู (ูุง ููุฌุฏ ุฏุนู ูู Apify)
- โ ูู ุชุธูุฑ Stories ูู ุงูุฃุฑุดูู
- โ ุงูู Heatmap ูู ูุนุฑุถ ูุดุงุท Stories (ููุท Posts)

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ:

| ุงูููู | ุงูุชุนุฏูู | ุงูุณุทูุฑ |
|------|----------|--------|
| `scraper.py` | ุชุนุทูู `fetch_instagram_stories()` | 231-250 |
| `scraper.py` | ููู ุงูููุฏ ุงููุฏูู ูู `_fetch_instagram_stories_OLD_DEPRECATED()` | 252-300 |
| ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุญุฐู ุฌููุน ุงูุณุฌูุงุช ูู ุฌุฏูู `stories` | - |

---

## ๐ก ูู ูููู ุฅุนุงุฏุฉ ุชูุนูู Storiesุ

### ูุงุ ุฅูุง ุฅุฐุง:

1. **Apify ูุฏุนู Stories ูุฑุฉ ุฃุฎุฑู:**
   - ุญุงููุงู Apify deprecated `resultsType: 'stories'`
   - ููุฑุฌุน Reels ุจุฏูุงู ูู Stories

2. **ุงุณุชุฎุฏุงู API ุขุฎุฑ:**
   - ูููู ุงุณุชุฎุฏุงู Instagram API ุฑุณูู (ููู ูุญุชุงุฌ permissions)
   - ุฃู ุงุณุชุฎุฏุงู scraper ุขุฎุฑ (ุบูุฑ Apify)

3. **ุชุบููุฑ ุฅูู Reels Archive:**
   - ุจุฏูุงู ูู "Stories Archive"ุ ูููู ุชุบููุฑูุง ูู "Reels Archive"
   - ูุฌูุจ Reels ุจุงุณุชุฎุฏุงู `resultsType: 'reels'`

---

## ๐ฏ ุงูุชูุตูุฉ:

### ุฎูุงุฑุงุช ูููุณุชูุจู:

#### ุงูุฎูุงุฑ 1: ุฅุจูุงุก Stories ูุนุทูุฉ (ููุตู ุจู ุญุงููุงู)
- โ Posts Archive ูุนูู ุจุดูู ููุชุงุฒ
- โ ูุง ุชูุฌุฏ ุจูุงูุงุช ุฎุงุทุฆุฉ (Reels ูุฏููุฉ)
- โ ุงููุธุงู ูุณุชูุฑ

#### ุงูุฎูุงุฑ 2: ุชุบููุฑ ูู Reels Archive (ุงุฎุชูุงุฑู)
- ุฅุฐุง ุฃุฑุฏุชุ ูููู ุชุนุฏูู ุงููุธุงู ููุฌูุจ **Reels** ุจุฏูุงู ูู Stories
- ุณูููู "Reels Archive" ุจุฏูุงู ูู "Stories Archive"
- ูุชุทูุจ ุชุนุฏูู ูู:
  - scraper.py (ุงุณุชุฎุฏุงู `resultsType: 'reels'`)
  - client.html (ุชุบููุฑ Labels ูู "Stories" ูู "Reels")

#### ุงูุฎูุงุฑ 3: ุฅุฎูุงุก Stories Archive ุชูุงูุงู
- ุฅุฒุงูุฉ ูุณุชุทูู "Stories Archive" ูู client.html
- ุฅุจูุงุก ููุท "Posts Archive"

---

## ๐ ุงูููุฎุต:

**ูุง ุญุฏุซ:**
1. โ ุญุฐู ุฌููุน "Stories" ุงููุฏููุฉ (ูุงูุช Reels) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. โ ุชุนุทูู ุฌูุจ Stories ูู scraper.py
3. โ ุงูุขู Stories Archive ูุนุฑุถ "No stories yet" (ููุฐุง ุตุญูุญ)

**ุงููุชูุฌุฉ:**
- โ Posts Archive ูุนูู ุจุดูู ููุชุงุฒ
- โ Stories Archive ูุนุทู (ุจุณุจุจ ูููุฏ Apify)
- โ ูุง ุชูุฌุฏ ุจูุงูุงุช ุฎุงุทุฆุฉ ูู ุงููุธุงู

**ุงููุณุชุฎุฏู ุณูุฑู:**
- โ Posts Archive ูููุก ุจุงูููุดูุฑุงุช
- โ๏ธ Stories Archive ูุงุฑุบ (No stories yet)

---

## ๐ ุฅุฐุง ุฃุฑุฏุช ุฅุนุงุฏุฉ Stories:

ุฑุงุณููู ูุณุฃุณุงุนุฏู ูู:
1. ุชุบููุฑ ุงููุธุงู ูู **Reels Archive** ุจุฏูุงู ูู Stories
2. ุฃู ุฅุฎูุงุก Stories Archive ุชูุงูุงู
3. ุฃู ุงุณุชุฎุฏุงู API ุขุฎุฑ (ุบูุฑ Apify) ููู Stories

**ููู ุญุงููุงูุ ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ ูุน Posts Archive ููุท.** โ
